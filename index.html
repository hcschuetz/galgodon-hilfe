<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Galgodon-Hilfe</title>
    <link rel="stylesheet" href="index.css">
    <script type="module" src="index.js"></script>
  </head>
  <body>
    <h1>Galgodon-Hilfe</h1>

    <details>
      <summary>Info</summary>
      <p>
        Diese simple Web-App hilft Rätsel-Erstellern im Galgodon-Spiel,
        Posts mit dem aktuellen Spielstand und einer neuen Umfrage
        zu erstellen.
      </p>
      <p>
        Die meisten Eingabe-Felder zum Spielstand
        müssen nur zu Beginn eines Rätsels ausgefüllt werden.
        Nach jeder Abstimmungs-Runde muss dann nur noch das Feld "Anfang" neu
        geschrieben und das Feld "Gewählte Buchstaben" ergänzt werden.
      </p>
      <p>
        Und natürlich muss eine neue Umfrage erstellt werden (mit dem
        Umfrage-Erstellungs-Tool unten oder direkt im Fedi-Client).
      </p>
      <p>
        <a href="https://github.com/hcschuetz/galgodon-hilfe/">Code</a>
      </p>
    </details>

    <h2>Spielstand</h2>

    <div class="input-grid">
      <div>Tags:</div>
      <textarea id="tags"></textarea>

      <div>Anfang:</div>
      <textarea id="prefix"></textarea>

      <div>Zu erratender Begriff:</div>
      <textarea id="secret"></textarea>

      <div>Gewählte Buchstaben:</div>
      <input type="text" id="letters">

      <div>
        <div>
          Erklärung für fehlende Buchstaben:
        </div>
        <div>
          (Leer lassen, falls fehlende Buchstaben nicht angezeigt werden sollen.)
        </div>
      </div>
      <input type="text" id="missing">

      <div>Ende:</div>
      <textarea id="suffix"></textarea>
    </div>

    <div class="buttons">
      <button id="clear">Felder leeren</button>
      <button id="reset">Beispiel-Werte</button>
    </div>

    <h2>Umfrage (experimentell!)</h2>

    <details>
      <summary>Info</summary>
      <p>
        Wenn man sich die 4 Alternativen für eine Buchstaben-Umfrage überlegt,
        beginnt man manchmal mit den Buchstaben und manchmal mit den Begriffen.
        Dieses UI versucht, beide Vorgehensweisen zu unterstützen.
      </p>
      <p>
        In den 4 Antwort-Feldern sollen die Auswahl-Buchstaben <em>nicht</em>
        durch Klammern markiert werden.
      </p>
      <h2>Buttons</h2>
      <p>Manche Buttons benötigen etwas zusätzliche Erklärung:</p>
      <ul>
        <li>
          <p>
            Bevor <strong>"Umfrage einfügen"</strong> geklickt wird,
            sollte die Zwischenablage mindestens 5 Zeilen enthalten.
            Davon werden die letzten 4 Zeilen als die möglichen Antworten
            verwendet.
            Alles davor bildet die Frage.
            (Dies ist dafür gedacht, dass man sich in einem Editor schon mal
            ein paar Fragen und Antworten zurecht legt.
            So kann man in einem Schritt die Frage + 4 Antworten übertragen.)
          </p>
          <p>
            Unter bestimmten Umständen verlangt der Browser eine Bestätigung
            für das Einfügen.  Damit soll vermieden werden,
            dass bösartige Webseiten die Zwischenablage heimlich auslesen.
          </p>
          <p>
            Die zu den Antworten gehörenden Buchstaben
            werden von diesem Button nicht verändert.
          </p>
        </li>
        <li>
          <p>
            Dagegen setzen bzw. löschen die <strong>"Beispiel"</strong>-Buttons
            sowie <strong>"Umfrage löschen"</strong> auch die Buchstaben.
          </p>
        </li>
        <li>
          <p>
            <strong>"Umfrage kopieren"</strong> kopiert die derzeitigen
            Umfrage-Felder (Frage + 4 Antworten, ohne Klammerung der zugehörigen
            Buchstaben) in die Zwischenablage.
          </p>
        </li>
        <li>
          <p>
            <strong>"Zufällige Reihenfolge"</strong> wählt eine zufällige
            Reihenfolge für die Antworten.  (Diese ist übrigens mit einer
            Wahrscheinlichkeit von 1/24 wieder die derzeitige Reihenfolge.)
          </p>
        </li>
      </ul>
    </details>

    <div id="poll-grid" class="input-grid">
      <div>Frage:</div>
      <textarea id="poll-heading"></textarea>
    </div>

    <div class="buttons">
      <button id="clear-poll">Umfrage löschen</button>
      <button id="insert-poll">Umfrage einfügen</button>
      <button id="copy-poll">Umfrage kopieren</button>
      <span id="poll-examples"></span>
      <button id="poll-randomize">Zufällige Reihenfolge</button>
    </div>

    <h3>Buchstaben-Auswahl</h3>

    <details>
      <summary>Info</summary>
      <p>
        Die farbig hinterlegten Buchstaben im 4×30-Buchstaben-Block unten
        können durch Klicken ausgewählt werden.
        (Es handelt sich um diejenigen Buchstaben, die in der Antwort vorkommen,
        aber noch nicht in einer früheren Runde gewählt wurden.)
      </p>
      <p>
        Buchstaben können auch in den 4 Eingabe-Feldern links von diesem Block
        eingegeben werden.
        (Hier können auch Buchstaben eingegeben werden,
        die nicht in der Antwort vorkommen.
        Dies ist für den Fall gedacht,
        dass man zunächst die Buchstaben und erst dann die Antworten wählt.)
        Um einen neuen Buchstaben einzugeben, ist es nicht nötig,
        einen evtl. bereits vorhandenen Buchstaben zu löschen
        oder zu markieren.  Es wird automatisch überschrieben.
      </p>
      <p>
        Farben:
        <span style="background: #0f08">Treffer</span>
        <span style="background: #ff08">Niete</span>
        <span style="background: #f008">Fehler</span>
      </p>
      <p>
        Die Daten im obigen Abschnitt "Eingaben" werden vom Browser gespeichert.
        Sie bleiben beim Schließen und erneuten Öffnen der Seite erhalten.
        Im Gegensatz dazu sind die Umfrage-Daten hier nicht persistent,
        denn sie werden nicht über mehrere Umfrage-Runden hinweg gebraucht.
      </p>
    </details>

    <div id="poll"></div>

    <div>
      <output id="poll-problems"></output>
    </div>

    <h2>Generierter Post-Text</h2>

    <div id="output-grid" class="input-grid">
      <div>
        <div>
          <button id="copy">Text kopieren</button>
        </div>
        <div>
          (~<output id="out-length"></output> Zeichen)
        </div>
      </div>
      <output id="out"></output>
    </div>
    <div class="buttons">
      <span></span>
    </div>

    <details>
      <summary>Zur Zahl der Zeichen</summary>
      <p>
        Diese wird wie in Mastodon berechnet:
      </p>
      <ul>
        <li>URLs zählen immer als 23 Zeichen.</li>
        <li>
          Bei Handles wie @someone@example.org wird nur der Teil @someone
          gezählt.
        </li>
      </ul>
      <p>
        Die Berechnung ist jedoch nicht ganz kompatibel.
        Daher das "~".
      </p>
    </details>
  </body>
</html>
